---
import { getEntryBySlug } from "astro:content";
import Base from "../../layouts/Base.astro";
import Navbar from "../../components/Navbar.astro";
import Footer from "../../components/Footer.astro";

const { slug } = Astro.params;
const post = await getEntryBySlug("blog", slug);

if (!post) {
  throw new Error("Post not found");
}
---

<Base title={post.data.title} description={post.data.description}>
  <Fragment slot="nav"><Navbar /></Fragment>
  <article class="prose mx-auto">
    <h1>{post.data.title}</h1>
    <p>{post.data.description}</p>
    <time>{post.data.date}</time>
    {post.data.tags && post.data.tags.map(tag => (
      <span class="bg-purple-700 text-white px-2 py-1 rounded ml-2">#{tag}</span>
    ))}
    <hr class="my-4" />
    {post.render()}
  </article>
  <Fragment slot="footer"><Footer /></Fragment>
</Base>
