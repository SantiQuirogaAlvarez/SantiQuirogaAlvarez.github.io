---
import { getCollection } from "astro:content";
import Base from "../../layouts/Base.astro";
import Navbar from "../../components/Navbar.astro";
import Footer from "../../components/Footer.astro";

const notes = await getCollection("notes");
const notesSorted = notes.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---
<Base title="Notes" description="Class notes and references.">
  <Fragment slot="nav"><Navbar /></Fragment>
  <h1 class="text-4xl font-extrabold tracking-tight mb-6 text-center">Notes</h1>
  <div class="max-w-2xl mx-auto">
    {notesSorted.map((note, idx) => (
      <a href={`/notes/${note.id}`} class="block group no-underline mb-6">
        <article class="transition-shadow hover:shadow-lg p-0">
          <h2 class="text-2xl font-bold mb-2 group-hover:underline text-[var(--ctp-mauve)]">{note.data.title}</h2>
          <p class="text-zinc-400 mb-2">Subject: {note.data.subject}</p>
          <span class="text-sm text-zinc-500 mb-2">🗓️ {note.data.date}</span>
        </article>
      </a>
    ))}
  </div>
  <Fragment slot="footer"><Footer /></Fragment>
</Base>
