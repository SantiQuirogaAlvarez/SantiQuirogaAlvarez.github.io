---
import { getCollection } from "astro:content";
import Base from "../../layouts/Base.astro";
import Navbar from "../../components/Navbar.astro";
import Footer from "../../components/Footer.astro";
import BlogCard from "../../components/BlogCard.astro";

const posts = await getCollection("blog");
const postsSorted = posts.sort((a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime());
---
<Base title="Blog" description="Latest articles and reflections.">
  <Fragment slot="nav"><Navbar /></Fragment>
  <h1 class="text-4xl font-extrabold tracking-tight mb-6 text-center">Blog</h1>
  <div class="max-w-2xl mx-auto">
    {postsSorted.map((post, idx) => (
      <BlogCard post={post} idx={idx} />
    ))}
  </div>
  <Fragment slot="footer"><Footer /></Fragment>
</Base>
